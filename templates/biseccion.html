{% load static %}
{% load index %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script type="text/javascript" src="https://cdn.geogebra.org/apps/deployggb.js"></script>
  <link rel="stylesheet" href="{% static 'styles/biseccion.css' %}">
  <link rel="stylesheet" href="{% static 'styles/index.css' %}">
  <script type="text/javascript">
    var parameters = {"prerelease":false,"width":1000,"height":450,"showToolBar":false,"borderColor":null,"showMenuBar":false,"showAlgebraInput":false,
      "showResetIcon":true,"enableLabelDrags":false,"enableShiftDragZoom":true,"enableRightClick":false,"capturingThreshold":null,"showToolBarHelp":false,
      "errorDialogsActive":true,"useBrowserForJS":false, "filename":"{% static 'geogebra-export.ggb' %}"};

    var applet = new GGBApplet("5.0", parameters);

    window.onload = function () {
      applet.inject("applet_container");
    };
  </script>
    <title>Método biseccion</title>
</head>
<body>
    <h1>Método de bisección</h1>
    <form action="/Ecuaciones_no_lineales/biseccion" method="POST">    {% csrf_token %}
      <div class="box-input">
        <div class="input">
          <label>Función f(x): </label><input value="" id="funcionF" type="text" name="inputField" size="30"/>
        </div>
        <div class="input">
          <label>Intervalo:[</label><input class="intervalo" id="puntoA" type="number" name="puntoA" step="any">,<input class="intervalo" id="puntoB" type="number" name="puntoB" step="any">]
        </div>
        <div class="input">
          <label>Error:</label><input name="error" type="number" value="0.0001" step="any" min="0.00001" max="0.01">
        </div>
      </div>
      <div class="box-botones">
          <button class="boton" onclick="evalInput(document.getElementById('funcionF').value);return false;">Mostrar Grafico</button>
          <input class="boton" onclick="mostrarTabla()" type="submit" value="Mostra tabla">
      </div>
      <div class="info">
        <div class="grafica" id="grafica">
            <div id="applet_container" ></div>
            <br>
        </div>
        <div class="tabla" id="tabla">    
          <div>
              <p>Resultado</p>
              <table class="table table-striped">
                <thead class="table-dark">
                  {% for i in nCate %}
                  <th>{{ cate|index:i }}</th>
                  {% endfor %}
                </thead>
                {% if metodo == "biseccion" or metodo == "posicionFalsa" %}
                  {% for i in count %}
                  <tr>
                    <td>{{ xi|index:i }}</td>
                    <td>{{ xd|index:i }}</td>
                    <td>{{ xr|index:i }}</td>
                    <td>{{ fxi|index:i }}</td>
                    <td>{{ fxd|index:i }}</td>
                    <td>{{ fxr|index:i }}</td>
                    <td>{{ err|index:i }}</td>
                  </tr>
                  {% endfor %}
                {% endif %}
                
                {% if metodo == "puntoFijo" %}
                  {% for i in count %}
                  <tr>
                    <td>{{ xi|index:i }}</td>
                    <td>{{ fx|index:i }}</td>
                    <td>{{ gx|index:i }}</td>
                    <td>{{ err|index:i }}</td>
                  </tr>
                  {% endfor %}
                {% endif %}
              </table>
            </div>
          </div>
        </div>
      </div>
      </form>
      <script src="{% static 'js/index.js' %}"></script>
      <script src="{% static 'js/method.js' %}"></script>
      <script type="text/javascript">
        function evalInput(strInput) {
          tabla=document.getElementById("tabla")  
          grafica =document.getElementById("grafica")
          grafica.style.display="flex";
          tabla.style.display="none";
          ggbApplet.evalCommand(strInput);
          return false; 
        }
      </script>
</body>
</html>